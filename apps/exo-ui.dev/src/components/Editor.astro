---
import fs from 'node:fs/promises';

import { Editor } from "./Editor.tsx";

const urls = Astro.props.files.map(item => new URL(`../examples/${item.file}`, import.meta.url));
const requests = urls.map(url => fs.readFile(url, 'utf-8'));
const contents  = await Promise.all(requests);

// @TODO
// - This can be much cleaner...
const files = Astro.props.files.reduce((result, item, index) => ({
  ...result,
  [item.name]: contents[index],
}), {});
---

<Editor client:load files={files} />
